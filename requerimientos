Aqu√≠ est√° el texto corregido y legible:

---

### **üìå REQUERIMIENTOS FUNCIONALES (CORE)**
#### **1. M√≥dulo de Pacientes**
- **RF-01**: Registro completo  
  - **Campos obligatorios**:  
    ```sql
    nombre VARCHAR(100) NOT NULL,
    apellidos VARCHAR(100) NOT NULL,
    fecha_nacimiento DATE NOT NULL,
    genero ENUM('M','F','Otro') NOT NULL,
    telefono VARCHAR(15) NOT NULL UNIQUE,
    email VARCHAR(100) UNIQUE,
    direccion TEXT,
    alergias TEXT DEFAULT 'Ninguna',
    tipo_sangre ENUM('A+','A-','B+','B-','AB+','AB-','O+','O-')
    ```
  - **Validaciones**:  
    - Tel√©fono con formato internacional (+51 123456789)  
    - Email v√°lido (regex: `^[^\s@]+@[^\s@]+\.[^\s@]+$`)  

- **RF-02**: Historial m√©dico  
  - **Estructura por consulta**:  
    ```json
    {
      "fecha": "2023-11-20T14:30:00Z",
      "motivo": "Dolor de cabeza",
      "diagnostico": "Migra√±a cr√≥nica",
      "tratamiento": [
        { "medicamento": "Ibuprofeno", "dosis": "400mg", "frecuencia": "Cada 8h" }
      ],
      "archivos": ["analisis_sangre.pdf"]
    }
    ```

#### **2. M√≥dulo de Citas**
- **RF-03**: Agendamiento  
  - **Flujo**:  
    1. Seleccionar especialidad (Cardiolog√≠a, Pediatr√≠a, etc.)  
    2. Elegir m√©dico (filtrar por disponibilidad en calendario)  
    3. Seleccionar fecha/hora (bloquear festivos)  
    4. Confirmar con SMS/email (usar Twilio o SendGrid)  

  - **Reglas de negocio**:  
    - Horario laboral: L-V 8:00 - 18:00  
    - Duraci√≥n est√°ndar: 30 minutos  
    - M√°ximo 2 citas por paciente/d√≠a  

#### **3. M√≥dulo M√©dico**
- **RF-04**: Consulta cl√≠nica  
  - **Plantilla de nota m√©dica**:  
    ```markdown
    ## Diagn√≥stico (CIE-10):
    - G43.909: Migra√±a no especificada

    ## Indicaciones:
    - Reposo en habitaci√≥n oscura
    - Tomar Dipirona 500mg cada 8h por 3 d√≠as
    - Control en 1 semana
    ```
  - **Firma electr√≥nica**:  
    - Requiere autenticaci√≥n con token OTP enviado al m√≥vil del m√©dico.

---

### **‚öôÔ∏è REQUERIMIENTOS T√âCNICOS**
#### **1. Backend**
- **RT-01**: API REST con endpoints:  
  ```http
  POST /api/pacientes       ‚Üí Crear paciente
  GET /api/pacientes?q=Juan ‚Üí Buscar pacientes
  POST /api/citas          ‚Üí Agendar cita
  GET /api/medicos/{id}/disponibilidad?fecha=2023-11-20 ‚Üí Ver horarios libres
  ```
- **RT-02**: Autenticaci√≥n JWT  
  - Roles: `admin`, `medico`, `recepcion`  
  - Permisos:  
    - Recepci√≥n: NO puede ver historiales m√©dicos completos  
    - M√©dicos: NO pueden eliminar citas  

#### **2. Frontend**
- **RT-03**: Interfaz responsive (Bootstrap 5 o TailwindCSS)  
  - **Vistas cr√≠ticas**:  
    1. `Login.vue`: Autenticaci√≥n con validaci√≥n en tiempo real  
    2. `PacientesList.vue`: Paginaci√≥n + filtros lado cliente  
    3. `CalendarioCitas.vue`: Drag & drop de citas (usar FullCalendar)  

#### **3. Base de Datos**
- **RT-04**: Esquema relacional m√≠nimo:  
  ```mermaid
  erDiagram
    PACIENTE ||--o{ CITA : tiene
    PACIENTE ||--o{ HISTORIAL : posee
    MEDICO ||--o{ CITA : atiende
    CITA {
      int id PK
      datetime fecha
      varchar estado
      int paciente_id FK
      int medico_id FK
    }
  ```

---

### **üîê REQUERIMIENTOS NO FUNCIONALES CR√çTICOS**
1. **Seguridad**:  
   - Cifrado AES-256 para datos sensibles (historiales)  
   - Backup diario autom√°tico en AWS S3 (retenci√≥n: 30 d√≠as)  

2. **Rendimiento**:  
   - M√°ximo 500ms de respuesta en b√∫squedas (indexar BD)  
   - Cache de 5 minutos para listados de m√©dicos  

3. **Disponibilidad**:  
   - SLA del 99.9% (uptime)  
   - Balanceador de carga para picos de tr√°fico  

---

### **‚úÖ CHECKLIST DE IMPLEMENTACI√ìN**
1. **Backend**:  
   - [ ] Modelos Sequelize para Paciente, Cita, M√©dico  
   - [ ] Middleware de autenticaci√≥n por roles  
   - [ ] Script de migraci√≥n inicial (`npm run migrate`)  

2. **Frontend**:  
   - [ ] Formulario de pacientes con validaci√≥n Yup  
   - [ ] Calendario interactivo con time slots  

3. **Despliegue**:  
   - [ ] Dockerfile para backend (exponer puerto 3000)  
   - [ ] Configurar CI/CD con GitHub Actions  

---

### **üìú REQUERIMIENTOS LEGALES (PER√ö)**
1. Protecci√≥n de Datos Personales (Ley N¬∞ 29733 - Ley de Protecci√≥n de Datos Personales)
   - **RL-01**: Consentimiento expreso  
     Implementar checkbox obligatorio:  
     "Autorizo el tratamiento de mis datos personales seg√∫n Ley N¬∞ 29733 para fines m√©dicos y administrativos"  
     Registrar IP, fecha/hora de consentimiento.  

   - **RL-02**: Derechos ARCO (Acceso, Rectificaci√≥n, Cancelaci√≥n, Oposici√≥n)  
     M√≥dulo para que pacientes soliciten:  
     - Descarga de sus datos en PDF/JSON.  
     - Eliminaci√≥n de historial (excepto registros cl√≠nicos esenciales).  

2. Historia Cl√≠nica Electr√≥nica (Resoluci√≥n Ministerial N¬∞ 546-2019/MINSA)  
   - **RL-03**: Requisitos m√≠nimos:  
     - Conservaci√≥n por 20 a√±os desde √∫ltima atenci√≥n.  
     - Firma digital con certificado de INFOCERT o OSE autorizado.  
     - Integridad garantizada (hash SHA-256 para modificaciones).  

3. Facturaci√≥n Electr√≥nica (Resoluci√≥n de Superintendencia N¬∞ 097-2017/SUNAT)  
   - **RL-04**: Comprobantes electr√≥nicos:  
     - Formato XML con estructura UBL 2.1.  
     - Incluir en PDF:  
       - C√≥digo de autorizaci√≥n SUNAT.  
       - Leyenda: "Representaci√≥n impresa de comprobante electr√≥nico".  

4. Seguridad Digital (Decreto Supremo N¬∞ 004-2019-JUS)  
   - **RL-05**: Medidas obligatorias:  
     - Cifrado TLS 1.2+ para transmisi√≥n de datos.  
     - Registro de auditor√≠a (logs) con:  
       ```json
       {
         "usuario": "medico123",
         "accion": "edit√≥_historial",
         "fecha": "2023-11-20T14:30:00-05:00",
         "ip": "190.45.210.130"
       }
       ```

---

### **üè• REQUERIMIENTOS ESPEC√çFICOS PARA CL√çNICAS PERUANAS**
1. Interoperabilidad (SIS, EsSalud, EPS)  
   - **RF-06**: Formatos est√°ndar:  
     - HL7 FHIR para historiales cl√≠nicos.  
     - Web Services SOAP para integraci√≥n con:  
       - Sistema de Referencias y Contrarreferencias.  
       - Farmacia DIGEMID (validaci√≥n de medicamentos).  

2. Prescripci√≥n Electr√≥nica (Directiva N¬∞ 101-MINSA/2018)  
   - **RF-07**: Estructura obligatoria:  
     ```xml
     <prescripcion>
       <medico colegiatura="12345-CPM"/>
       <medicamento codigo="74281010" nombre="Paracetamol 500mg"/>
       <posologia dosis="1 tableta" frecuencia="cada 8 horas"/>
       <firma_digital>...</firma_digital>
     </prescripcion>
     ```

---

### **üíª IMPLEMENTACI√ìN T√âCNICA CONFORME A LEY**
1. Backend (Node.js + Express)  
   ```javascript
   // Middleware de validaci√≥n SUNAT
   app.post('/api/facturas', (req, res) => {
     if (!req.body.emisor.ruc.match(/^10\d{8}$/)) {
       return res.status(400).json({ error: "RUC inv√°lido" });
     }
     // Generar XML UBL 2.1
   });
   ```

2. Base de Datos (PostgreSQL)  
   ```sql
   CREATE TABLE pacientes (
     id SERIAL PRIMARY KEY,
     dni CHAR(8) UNIQUE NOT NULL,
     datos_sensibles BYTEA, -- Cifrado con pgcrypto
     consentimiento BOOLEAN DEFAULT FALSE,
     fecha_eliminacion TIMESTAMP -- Para derecho al olvido
   );
   ```

3. Frontend (React)  
   ```jsx
   // Componente de consentimiento
   <Checkbox 
     label="Autorizo tratamiento de datos seg√∫n Ley N¬∞ 29733"
     required
     onChange={(e) => setConsent(e.target.checked)}
   />
   ```

---

### **‚úîÔ∏è CHECKLIST LEGAL OBLIGATORIO**
- [ ] Registro en Registro Nacional de Protecci√≥n de Datos Personales.  
- [ ] Certificado digital para firma electr√≥nica (Autoridad Certificadora Ra√≠z ICP Per√∫).  
- [ ] Contrato con Operador de Servicios Electr√≥nicos para facturaci√≥n.  
- [ ] Pol√≠tica de seguridad inform√°tica documentada (ISO/IEC 27001).  

---

### **üí° RECOMENDACIONES CLAVE**
- Asesor√≠a especializada:  
  Contratar abogado experto en Derecho Digital M√©dico (‚âà S/ 150-300/hora).  
- Software validado:  
  Usar librer√≠as certificadas por ONGEI para cifrado.  
- Hosting local:  
  Servidores f√≠sicos en Per√∫ (o cloud con AWS Lima Region).  

---

### **üìÇ DOCUMENTACI√ìN ADICIONAL REQUERIDA**
- Anexo 1: Modelo de cl√°usula de consentimiento informado.  
- Anexo 2: Flujo de atenci√≥n seg√∫n normativa MINSA.  
- Anexo 3: Especificaciones t√©cnicas para interoperabilidad con RENIEC.  

--- 
